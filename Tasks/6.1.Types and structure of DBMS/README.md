# Домашнее задание к занятию "6.1. Типы и структура СУБД"

#### Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
- Склады и автомобильные дороги для логистической компании
- Генеалогические деревья
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

   **Решение:**

- ***Электронные чеки в json виде*** - для этой сущности я бы выбрал документно-ориентированный NoSQL,
     так как такие БД хранят данные как документы.

- ***Склады и автомобильные дороги для логистической компании*** - для этой сущности лучше применить графовые БД,
     так как в такой структуре можно задавать дополнительные атрибуты.

- ***Генеалогические деревья*** - иерархическая БД. В ней данные представлены в виде древовидной структуры
     (родитель - потомок). Каждая запись имеет не более одного родителя и несколько потомков, что подходит для задачи.

- ***Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации*** - для такой сущности
     необходимо применять Key-Value БД. Например, Redis, так как у него есть поддержка Time-To-Live, хранение данных в
     оперативной памяти и возможность масштабирования. Эти преимущества идеально подходят для такой сущности.

- ***Отношения клиент-покупка для интернет-магазина*** - Реляционные БД, так как они обеспечивают связанность данных
     между различными таблицами между собой (например, список клиентов и список товаров). Нет необходимости заводить
     отдельные списки типа key-value или БД сетевого типа (то есть не надо дублировать данные).

#### Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме.
Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей
системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?
   
   **Решение:** 

- ***Данные записываются на все узлы с задержкой до часа (асинхронная запись)*** -
     по CAP теореме - это CA, а согласно PACELC-теореме - это EL-PC.

- ***При сетевых сбоях, система может разделиться на 2 раздельных кластера*** - 
     по CAP теореме - это AP, а согласно PACELC-теореме - это PA-EL.

- ***Система может не прислать корректный ответ или сбросить соединение*** - 
     по CAP теореме - это CA, а согласно PACELC-теореме - это PA-EC.

#### Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?
   
**Решение:**

Думаю, что не могут, так как это два противоположных принципа. В основе BASE - доступность данных даже в ущерб
согласованности. ACID же основывается на согласованности данных и надежности в случае сбоев.
 
#### Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

   **Решение:**

Key-value хранилище с механизмом pub/sub - это Redis.
К его недостаткам можно отнести:

- Хранение данных в ОЗУ. То есть размер базы ограничен памятью и есть проблемы с надежностью хранения данных
- Не поддерживает SQL
- Нет ролевой модели доступов.